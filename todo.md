# 見積システム開発タスク一覧

## Phase 1: 基盤構築 (2-3週間)

### 開発環境のセットアップ
- [ ] 必要パッケージのインストール
  - Supabase クライアント (@supabase/supabase-js, @supabase/ssr)
  - shadcn/ui のセットアップ
  - React Hook Form + Zod
  - @react-pdf/renderer (見積書PDF生成)
  - xlsx (Excel出力)
  - その他UI関連

### Supabaseプロジェクトの初期設定
- [ ] Supabaseプロジェクト作成
- [ ] 環境変数設定 (.env.local)
- [ ] Supabaseクライアントの設定ファイル作成
- [ ] マイグレーションディレクトリ作成

### データベーススキーマの構築
- [ ] usersテーブル作成
- [ ] customersテーブル作成
- [ ] suppliersテーブル作成
- [ ] projectsテーブル作成
- [ ] quotesテーブル作成
- [ ] quote_itemsテーブル作成
- [ ] procurement_logsテーブル作成
- [ ] billing_requestsテーブル作成
- [ ] Row Level Security (RLS) ポリシー設定
- [ ] インデックス・外部キー制約の設定

### 認証機能の実装
- [ ] ログインページ作成
- [ ] ログアウト機能
- [ ] パスワードリセット機能
- [ ] 認証ミドルウェア実装
- [ ] 役割ベースのアクセス制御

### 基本レイアウト・ナビゲーションの実装
- [ ] ダッシュボードレイアウト作成
- [ ] サイドバーナビゲーション
- [ ] ヘッダー(ユーザー情報、通知)
- [ ] レスポンシブ対応

### マスタ管理機能
- [ ] 顧客マスタ
  - [ ] 一覧表示
  - [ ] 登録フォーム
  - [ ] 編集フォーム
  - [ ] 削除機能
  - [ ] 検索・フィルタ機能
- [ ] 仕入先マスタ
  - [ ] 一覧表示
  - [ ] 登録フォーム
  - [ ] 編集フォーム
  - [ ] 削除機能
  - [ ] 検索・フィルタ機能
- [ ] ユーザー管理
  - [ ] 一覧表示
  - [ ] 登録フォーム
  - [ ] 編集フォーム
  - [ ] 無効化機能
  - [ ] 役割設定

---

## Phase 2: 見積機能 (3-4週間)

### 案件管理機能
- [ ] 案件一覧ページ
  - [ ] 一覧表示(テーブル)
  - [ ] フィルタ機能(営業担当、ステータス、顧客、期間)
  - [ ] ソート機能
  - [ ] 検索機能(案件名、顧客名)
- [ ] 案件登録ページ
  - [ ] 入力フォーム作成
  - [ ] バリデーション(Zod)
  - [ ] 案件番号自動採番
- [ ] 案件編集ページ
- [ ] 案件詳細ページ
  - [ ] 基本情報表示
  - [ ] 紐づく見積一覧
  - [ ] 計上申請履歴
  - [ ] アクティビティログ

### 見積作成・編集機能
- [ ] 見積作成ページ
  - [ ] ヘッダ情報入力フォーム
  - [ ] 明細入力UI(動的行追加)
  - [ ] 金額自動計算機能
  - [ ] 一時保存機能
- [ ] 見積編集ページ
- [ ] 見積一覧ページ
- [ ] 見積詳細ページ

### 見積承認フロー
- [ ] 承認依頼機能
- [ ] 承認/却下機能
- [ ] 承認待ち一覧
- [ ] 通知機能(メール)

### 見積書PDF生成
- [ ] PDFテンプレート作成
- [ ] PDF生成機能実装
- [ ] Supabase Storageへのアップロード
- [ ] PDFダウンロード機能

### 見積改訂機能
- [ ] 既存見積のコピー機能
- [ ] バージョン管理
- [ ] 履歴表示

---

## Phase 3: 発注・入荷管理 (2-3週間)

### 発注待ち一覧
- [ ] 発注待ち明細の抽出・表示
- [ ] フィルタ・検索機能
- [ ] 複数選択機能
- [ ] 一括発注登録
- [ ] CSVエクスポート

### 入荷登録機能
- [ ] 入荷登録フォーム
- [ ] 検索機能(案件名、顧客名、品名)
- [ ] 明細ステータス更新
- [ ] 営業担当への通知

### 進捗ダッシュボード
- [ ] 発注済・未入荷一覧
- [ ] 入荷待ち日数表示
- [ ] 出荷可能予定日表示
- [ ] アラート機能

---

## Phase 4: 計上管理 (3-4週間)

### 営業ダッシュボード
- [ ] 今月計上予定サマリー表示
- [ ] 計上申請可否の自動判定
- [ ] 申請可能案件リスト
- [ ] 明細完了状況の可視化
- [ ] 計上申請フォーム

### 計上申請一覧(営業事務)
- [ ] 申請一覧表示
- [ ] 詳細情報表示(明細ごとの入荷状況)
- [ ] フィルタ機能
- [ ] 承認/差し戻し機能
- [ ] 通知機能

### 計上確定・エクスポート
- [ ] 月次計上確定リスト
- [ ] 売上・仕入・粗利の集計
- [ ] 販売管理システム連携用CSV出力
- [ ] ノーツ連携用CSV出力
- [ ] エクスポート履歴記録

---

## Phase 5: 通知・レポート (2週間)

### メール通知機能
- [ ] Resend セットアップ
- [ ] 見積承認依頼メール
- [ ] 見積承認完了メール
- [ ] 計上申請メール
- [ ] 計上承認/却下メール
- [ ] 入荷完了メール

### システム内通知
- [ ] 通知データモデル作成
- [ ] ベルアイコン・未読件数表示
- [ ] 通知一覧ドロワー
- [ ] 既読管理

### レポート機能
- [ ] 売上分析
  - [ ] 月次売上推移グラフ
  - [ ] 営業担当別売上ランキング
  - [ ] 顧客別売上ランキング
  - [ ] 案件カテゴリ別売上
- [ ] 粗利分析
  - [ ] 月次粗利推移
  - [ ] 営業担当別粗利率
  - [ ] 案件別粗利率ランキング

---

## Phase 6: テスト・改善 (2週間)

### テスト実装
- [ ] Vitest セットアップ
- [ ] 単体テスト作成
- [ ] Playwright セットアップ
- [ ] E2Eテストシナリオ作成
- [ ] E2Eテスト実装

### パフォーマンス最適化
- [ ] ページ読み込み速度計測
- [ ] データベースクエリ最適化
- [ ] インデックスチューニング
- [ ] 画像・アセット最適化

### ユーザビリティ改善
- [ ] ユーザーフィードバック収集
- [ ] UI/UX改善
- [ ] エラーメッセージの改善
- [ ] ヘルプ・ガイド作成

---

## Phase 7: 移行・運用開始 (1週間)

### データ移行
- [ ] 既存Excelデータの整理
- [ ] データ移行スクリプト作成
- [ ] 移行データの検証

### ドキュメント作成
- [ ] ユーザーマニュアル作成
- [ ] 管理者向けマニュアル作成
- [ ] 運用手順書作成

### 本番リリース準備
- [ ] 本番環境構築(Vercel)
- [ ] 環境変数設定
- [ ] セキュリティチェック
- [ ] バックアップ設定

### ユーザートレーニング・リリース
- [ ] ユーザートレーニング実施
- [ ] 本番リリース
- [ ] 初期サポート

---

## 優先順位の高いタスク(現在)

### 🔴 最優先(Phase 1)
1. 開発環境のセットアップ
2. Supabaseプロジェクトの初期設定
3. データベーススキーマの構築
4. 認証機能の実装
5. 基本レイアウト・ナビゲーションの実装

### 🟡 次の優先(Phase 1)
6. マスタ管理機能(顧客)
7. マスタ管理機能(仕入先)
8. マスタ管理機能(ユーザー)
